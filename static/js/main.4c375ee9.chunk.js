(this["webpackJsonpwiki-type"]=this["webpackJsonpwiki-type"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports=a(13)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(5),s=a.n(i),l=(a(11),a(1));a(12);var c=function(e){var t=e.setMyText,a=e.setWikiTitle,r=e.setNewRandomArticle,i=e.disablingButton,s=e.newRandomArticle,l=e.loremText,c=e.focusTextArea;return Object(n.useEffect)((function(){!function e(){s&&fetch("https://en.wikipedia.org/w/api.php?format=json&action=query&generator=random&grnnamespace=0&prop=extracts&grnlimit=1&origin=*&explaintext&exsectionformat=plain",{method:"GET"}).then((function(e){return e.json()})).then((function(n){var r=n.query.pages;console.log(JSON.stringify(n,null,2));var i=r[Object.keys(r)[0]].extract.replace(/\(.*\)/g,"").replace(/\[.*\]/g,"").replace(/\s\./g,".").replace(/\s,/g,",").replace(/\s+/g," ");if(i.length<370)return console.log("text to short, rendering again"),a("[Data loading...]"),e();if(!/^[\w\s'\\\^!"#\$%&\(\)\*\+,-\.\/:;<=>\?@\[\]\^_`\{\|\}~ ]*$/i.test(i))return console.log("characters out of english, rendering again"),a("[Data loading...]"),e();t(i),a(r[Object.keys(r)[0]].title),c.current.removeAttribute("disabled")})).catch((function(){console.log("error fetching data"),t(l),a("[Error accessing wikipedia - default text loaded]"),c.current.removeAttribute("disabled")}))}(),r(!1),setTimeout((function(){i.current.removeAttribute("disabled")}),500)}),[s,l,i,t,r,a,c]),null},o=a(2),u=a(3);var m=function(e){return console.log(e.wikiTitle),r.a.createElement("div",{className:"wiki-controler container"},r.a.createElement("div",{className:"wiki-title-container"},r.a.createElement("p",{className:"wiki-title-label"},"Current wikipedia article"),r.a.createElement("div",{className:"wiki-title-display"},r.a.createElement("a",{className:"wiki-title-display-link",href:"https://en.wikipedia.org/wiki/".concat(e.wikiTitle),target:"_blank",rel:"noopener noreferrer"},e.wikiTitle))),r.a.createElement("button",{className:"btn btn-control btn-wiki",onClick:function(){e.isCounterRunning?(e.resetTimer(),e.setNewRandomArticle(!0),e.disablingButton.current.setAttribute("disabled",!0)):(e.setNewRandomArticle(!0),e.disablingButton.current.setAttribute("disabled",!0))},ref:e.disablingButton},"Random Wiki Article"))};var d=function(e){return r.a.createElement("div",{className:"hints",style:{visibility:"".concat(e.areHintsVisible?"visible":"hidden")}},r.a.createElement("div",{className:"inner-hints container"},r.a.createElement("p",{className:"hints-title"},"Hints"),r.a.createElement("ul",null,r.a.createElement("li",null,"Change the timer value (optional)"),r.a.createElement("li",null,"Type in typing area to start/resume"),r.a.createElement("li",null,"Press ",r.a.createElement("b",null,"Tab")," once to pause, ",r.a.createElement("b",null,"Enter")," to resume"),r.a.createElement("li",null,"Press ",r.a.createElement("b",null,"Shift+Delete")," to reset"),r.a.createElement("li",null,"Click on the article title to visit wikipedia page"),r.a.createElement("li",null,"Mouse over results for more information"))))};var b=function(e){var t,a,n=Math.floor(e.timerValue/60),i=e.timerValue-60*n,s=n.toString(),l=i.toString();t=n>=10?s:"0".concat(s),a=i>=10?l:"0".concat(l);var c="".concat(t,":").concat(a);return r.a.createElement("div",{className:"upper-ui container"},r.a.createElement("div",{className:"upper-ui-left"},r.a.createElement("div",{className:"upper-ui-inner"},r.a.createElement("p",{className:"upper-ui-item-label",style:{visibility:"hidden"}},"Time"),r.a.createElement("p",{className:"upper-ui-item counter"},c))),r.a.createElement("div",{className:"upper-ui-right"},r.a.createElement("div",{className:"upper-ui-inner"},r.a.createElement("p",{className:"upper-ui-item-label"},"Speed (KPM)"),r.a.createElement("p",{className:"upper-ui-item display-speed"},e.liveResults.speed)),r.a.createElement("div",{className:"upper-ui-inner"},r.a.createElement("p",{className:"upper-ui-item-label"},"Accuracy"),r.a.createElement("p",{className:"upper-ui-item display-accuracy"},e.liveResults.accuracy," %")),r.a.createElement("button",{className:"btn btn-display-hints",onClick:e.toggleHints,style:{backgroundColor:"".concat(e.areHintsVisible?"black":"green")},onMouseEnter:function(t){t.target.style.backgroundColor="".concat(e.areHintsVisible?"green":"black")},onMouseLeave:function(t){t.target.style.backgroundColor="".concat(e.areHintsVisible?"black":"green")}},"?")))};var p=function(e){var t="none";return"red"===e.color&&(t="underline"),"blue"===e.color&&" "===e.letterToRender&&(t="underline"),r.a.createElement("span",{style:{color:"".concat(e.color),textDecoration:"".concat(t),fontWeight:"".concat("normal")}},e.letterToRender)};var f=function(e){return r.a.createElement("div",{className:"wiki-display-outer container"},r.a.createElement("div",{className:"wiki-display"},e.arrToRender.map((function(e,t){return r.a.createElement(p,{letterToRender:e[0],color:e[1],key:t})})),e.indexOfPartialTextArr!==e.arrOfPartialText.length-1?e.ellipsis:""),r.a.createElement("div",{className:"wiki-display-page-counter"},e.indexOfPartialTextArr+1,"/",e.arrOfPartialText.length))};var g=function(e){return r.a.createElement("textarea",{className:"typing-display container",onChange:function(t){e.changeTextAreaValue(t)},autoFocus:!0,value:e.textAreaValue,ref:e.focusTextArea,onPaste:function(e){e.preventDefault()},onKeyDown:function(t){!function(e){-1!==["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].indexOf(e.key)&&e.preventDefault()}(t),e.isActive||-1!==["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].indexOf(t.key)||e.toggleTimer()},onClick:function(e){var t=e.target;t.setSelectionRange(t.value.length,t.value.length)},onFocus:function(){e.areHintsVisible&&e.toggleHints()},onBlur:function(){e.areHintsVisible&&e.toggleHints()},placeholder:"Type here"})};var v=function(e){return r.a.createElement("div",{className:"control-buttons-row container"},r.a.createElement("div",{className:"column-left"},r.a.createElement("button",{className:"btn btn-control control-item",onClick:function(){return e.toggleTimer()}},e.isActive?"Pause":"Run"),r.a.createElement("select",{className:"control-item timer-select",onChange:e.setTimerOnSelect,ref:e.isDisabled,defaultValue:"60"},r.a.createElement("option",{value:"5"},"00:05"),r.a.createElement("option",{value:"30"},"00:30"),r.a.createElement("option",{value:"60"},"01:00"),r.a.createElement("option",{value:"120"},"02:00"),r.a.createElement("option",{value:"300"},"05:00"))),r.a.createElement("div",{className:"column-right"},r.a.createElement("button",{className:"btn btn-control control-item btn-reset",onClick:function(t){e.resetTimer(),e.putFocusOnTextArea()}},"Reset")))};var E=function(e){return r.a.createElement("div",{className:"results-buttons-row container"},r.a.createElement("button",{hidden:!0,className:"btn btn-control btn-results",onClick:e.toggleResults,style:{backgroundColor:"".concat(e.areResultsVisible?"Black":"steelblue")},onMouseEnter:function(t){t.target.style.backgroundColor="".concat(e.areResultsVisible?"steelblue":"Black")},onMouseLeave:function(t){t.target.style.backgroundColor="".concat(e.areResultsVisible?"Black":"steelblue")},ref:e.focusElement},"Show",r.a.createElement("span",{style:{margin:"auto 0.05em"}},"|"),"Hide Results"))};var R=function(e){var t,a,n,i=Math.floor(e.finalResults["timer length"]/60),s=i.toString(),l=e.finalResults["timer length"]-60*i,c=l.toString();return a=i?"".concat(s,"min"):"",n=l?"".concat(c,"s"):"",t="".concat(a," ").concat(n),r.a.createElement("div",{className:"results",style:{visibility:"".concat(e.areResultsVisible?"visible":"hidden")}},r.a.createElement("div",{className:"inner-results container"},r.a.createElement("p",{className:"results-title"},"Results"," ",r.a.createElement("span",{style:{fontWeight:"normal"}},"(timer length: ",t,")")),r.a.createElement("div",{className:"results-main"},r.a.createElement("div",{className:"tooltip"},r.a.createElement("p",null,"Speed: ",e.finalResults.speed," KPM"),r.a.createElement("span",{className:"tooltip-text"},"Keys per minute - with penalties (minus 5 for 1 mistake/minute)")),r.a.createElement("div",{className:"tooltip"},r.a.createElement("p",null,"Accuracy: ",e.finalResults.accuracy,"%"),r.a.createElement("span",{className:"tooltip-text"},"Incorrect entries/total entries percentage"))),r.a.createElement("div",{className:"results-other"},r.a.createElement("div",{className:"tooltip"},r.a.createElement("p",null,"Correct Entries: ",e.finalResults.correct),r.a.createElement("span",{className:"tooltip-text"},"Total correct entries (including backspace corrected)")),r.a.createElement("div",{className:"tooltip"},r.a.createElement("p",null,"Incorrect Entries: ",e.finalResults.incorrect),r.a.createElement("span",{className:"tooltip-text"},"Total incorrect entries (including backspace corrected)")),r.a.createElement("div",{className:"tooltip"},r.a.createElement("p",null,"Raw Key Speed: ",e.finalResults.noPenalty," KPM"),r.a.createElement("span",{className:"tooltip-text"},"Keys per minute - without penalties for mistakes")))))};var y=function(e){var t=e.myText.split(""),a=Math.floor(t.length/363),i=function(e,t){for(var n=[],r=0;r<=a;r++){for(var i=[],s=r*e;s<e+r*e;s++)i.push(t[s]);var l=i.join("");n.push(l)}return n}(363,t),s=Object(n.useState)(0),c=Object(l.a)(s,2),o=c[0],p=c[1],y=i[o],T=y.split(""),h=Object(n.useCallback)((function(){for(var e=[],t=0;t<363;t++)e.push("DimGray");return e}),[363]),O=Object(n.useState)(h()),j=Object(l.a)(O,2),N=j[0],k=j[1],A=Object(n.useState)(""),w=Object(l.a)(A,2),x=w[0],V=w[1],C=Object(n.useState)(""),S=Object(l.a)(C,2),H=S[0],P=S[1],D=e.dispatch;Object(n.useEffect)((function(){x.split("");if(x.length>H.length){var e=Object(u.a)(N);D({type:"resultsNoPenalty"}),x[x.length-1]===T[x.length-1]&&(D({type:"resultsCorrect"}),e[x.length-1]="blue"),x[x.length-1]!==T[x.length-1]&&(D({type:"resultsIncorrect"}),e[x.length-1]="red"),k(Object(u.a)(e)),x.length===y.length&&(V(""),o<a?(k(h()),p((function(e){return e+1}))):(k(h()),p(0)))}if(x.length<H.length){var t=Object(u.a)(N);t[x.length]="DimGray",k(Object(u.a)(t))}P(x)}),[x,H.length,D,N,T,o,a,y.length,h]);var I=e.displayToReset,L=e.setDisplayToReset;Object(n.useEffect)((function(){I&&(V(""),p(0),k(h()),L(!1))}),[I,h,L]);var q=function(){for(var e=[],t=0;t<T.length;t++){var a=[];a.push(T[t]),a.push(N[t]),e.push(a)}return e}();return r.a.createElement("div",{className:"outer-container"},r.a.createElement(d,{areHintsVisible:e.areHintsVisible}),r.a.createElement("h3",{className:"title"},"Wiki Speed Typing"),r.a.createElement("div",{className:"main-square"},r.a.createElement(b,{resultsObj:e.resultsObj,toggleHints:e.toggleHints,areResultsVisible:e.areResultsVisible,areHintsVisible:e.areHintsVisible,timerValue:e.timerValue,isActive:e.isActive,liveResults:e.state.liveResults}),r.a.createElement(f,{indexOfPartialTextArr:o,arrToRender:q,arrOfPartialText:i,ellipsis:"..."}),r.a.createElement(g,{changeTextAreaValue:function(e){V(e.target.value)},toggleTimer:e.toggleTimer,focusTextArea:e.focusTextArea,isActive:e.isActive,areHintsVisible:e.areHintsVisible,toggleHints:e.toggleHints,textAreaValue:x}),r.a.createElement(v,{toggleTimer:e.toggleTimer,isActive:e.isActive,setTimerOnSelect:e.setTimerOnSelect,isDisabled:e.isDisabled,resetTimer:e.resetTimer,putFocusOnTextArea:e.putFocusOnTextArea}),r.a.createElement(m,{wikiTitle:e.wikiTitle,setNewRandomArticle:e.setNewRandomArticle,disablingButton:e.disablingButton,isActive:e.isActive,resetTimer:e.resetTimer,isCounterRunning:e.isCounterRunning}),r.a.createElement(E,{toggleResults:e.toggleResults,areResultsVisible:e.areResultsVisible,focusElement:e.focusElement})),r.a.createElement(R,{areResultsVisible:e.areResultsVisible,resultsObj:e.resultsObj,resultsAfterFinish:e.resultsAfterFinish,finalResults:e.state.finalResults}))};var T=function(e){var t={currentResults:{resultsCorrect:0,resultsIncorrect:0,resultsNoPenalty:0},liveResults:{speed:"-",accuracy:"- ",correct:"-",incorrect:"-",noPenalty:"-","timer length":e.constantTimerValue},finalResults:{speed:"-",accuracy:"- ",correct:"-",incorrect:"-",noPenalty:"-","timer length":""}},a=Object(n.useReducer)((function(t,a){var n=t.currentResults,r=t.currentResults,i=r.resultsCorrect,s=r.resultsIncorrect,l=r.resultsNoPenalty,c=t.liveResults,u=t.finalResults;if("resultsCorrect"===a.type)return{currentResults:{resultsCorrect:i+1,resultsIncorrect:s,resultsNoPenalty:l},liveResults:Object(o.a)({},c),finalResults:Object(o.a)({},u)};if("resultsIncorrect"===a.type)return{currentResults:{resultsCorrect:i,resultsIncorrect:s+1,resultsNoPenalty:l},liveResults:Object(o.a)({},c),finalResults:Object(o.a)({},u)};if("resultsNoPenalty"===a.type)return{currentResults:{resultsCorrect:i,resultsIncorrect:s,resultsNoPenalty:l+1},liveResults:Object(o.a)({},c),finalResults:Object(o.a)({},u)};if("reset"===a.type)return{currentResults:{resultsCorrect:0,resultsIncorrect:0,resultsNoPenalty:0},liveResults:Object(o.a)({},c),finalResults:Object(o.a)({},u)};if("setLiveResults"===a.type)return{currentResults:Object(o.a)({},n),liveResults:Object(o.a)({},m(i,s,l,e.timerValue)),finalResults:Object(o.a)({},u)};if("resetLiveResults"===a.type)return{currentResults:Object(o.a)({},n),liveResults:Object(o.a)({},m(0,0,0,0)),finalResults:Object(o.a)({},u)};if("setFinalResults"===a.type)return{currentResults:Object(o.a)({},n),liveResults:Object(o.a)({},c),finalResults:Object(o.a)({},m(i,s,l,0))};throw new Error;function m(t,a,n,r){var i=Math.round(60*n/(e.constantTimerValue-r)*100)/100,s=i-5*(60*a/(e.constantTimerValue-r));return{speed:s>=0?Math.round(10*s)/10:0,accuracy:n>0?Math.round(t/n*1e3)/10:0,correct:t,incorrect:a,noPenalty:i,"timer length":e.constantTimerValue.toString()}}}),t),i=Object(l.a)(a,2),s=i[0],c=i[1],u=e.isActive,m=e.timerValue,d=e.constantTimerValue,b=e.toReset;return Object(n.useEffect)((function(){u&&m===d?(c({type:"reset"}),c({type:"resetLiveResults"})):u&&m%2===0&&c({type:"setLiveResults"}),b&&c({type:"resetLiveResults"}),m<=0&&(c({type:"setFinalResults"}),c({type:"reset"}),c({type:"resetLiveResults"}))}),[m,u,b,d]),r.a.createElement(y,{resultsCorrect:s.resultsCorrect,resultsIncorrect:s.resultsIncorrect,resultsNoPenalty:s.resultsNoPenalty,dispatch:c,state:s,timerValue:e.timerValue,setTimerValue:e.setTimerValue,constantTimerValue:e.constantTimerValue,toggleTimer:e.toggleTimer,setTimerOnSelect:e.setTimerOnSelect,isActive:e.isActive,resetTimer:e.resetTimer,toReset:e.toReset,displayToReset:e.displayToReset,setDisplayToReset:e.setDisplayToReset,areHintsVisible:e.areHintsVisible,areResultsVisible:e.areResultsVisible,toggleHints:e.toggleHints,toggleResults:e.toggleResults,isDisabled:e.isDisabled,focusTextArea:e.focusTextArea,putFocusOnTextArea:e.putFocusOnTextArea,focusElement:e.focusElement,myText:e.myText,wikiTitle:e.wikiTitle,setNewRandomArticle:e.setNewRandomArticle,disablingButton:e.disablingButton,isCounterRunning:e.isCounterRunning})};var h=function(){var e=Object(n.useState)(60),t=Object(l.a)(e,2),a=t[0],i=t[1],s=Object(n.useState)(60),o=Object(l.a)(s,2),u=o[0],m=o[1],d=Object(n.useState)(!1),b=Object(l.a)(d,2),p=b[0],f=b[1],g=Object(n.useState)(!1),v=Object(l.a)(g,2),E=v[0],R=v[1],y=Object(n.useState)(!1),h=Object(l.a)(y,2),O=h[0],j=h[1],N=Object(n.useState)(!1),k=Object(l.a)(N,2),A=k[0],w=k[1],x=Object(n.useRef)(null),V=Object(n.useState)("[Data loading...]"),C=Object(l.a)(V,2),S=C[0],H=C[1],P=Object(n.useState)(""),D=Object(l.a)(P,2),I=D[0],L=D[1],q=Object(n.useState)(!0),M=Object(l.a)(q,2),B=M[0],F=M[1];Object(n.useEffect)((function(){document.addEventListener("keypress",ee)}));var K=Object(n.useState)(!1),W=Object(l.a)(K,2),U=W[0],G=W[1],J=Object(n.useState)(!1),$=Object(l.a)(J,2),_=$[0],Q=$[1],z=Object(n.useCallback)((function(){Q((function(e){return!e}))}),[]);function X(){f(!p)}function Y(){A&&(R(!0),j(!0))}Object(n.useEffect)((function(){p&&a>0&&_&&z(),!_&&a<=0&&z()}),[p,a,_,z]),Object(n.useEffect)((function(){var e=null;return p&&a>0&&(e=setInterval((function(){return i((function(e){return e-1}))}),1e3),A||w((function(e){return!e}))),E&&(clearInterval(e),i(u),f(!1),A&&w((function(e){return!e})),R(!1)),!p&&a>0&&clearInterval(e),a<=0&&(j(!0),clearInterval(e),f(!1),A&&w((function(e){return!e})),i(u)),function(){return clearInterval(e)}}),[a,p,E,A,u]);var Z={};function ee(e){u!==a&&(Z[e.key]=!0,"Tab"===e.key&&p&&(X(),delete Z[e.key]),Z.Shift&&"Delete"===e.key&&(Y(),delete Z[e.key]))}var te=Object(n.useRef)(null);Object(n.useEffect)((function(){p||A?te.current.setAttribute("disabled",!0):te.current.removeAttribute("disabled")}),[p,A]);var ae=Object(n.useRef)(null),ne=Object(n.useRef)(null);function re(){ne.current.focus()}return Object(n.useEffect)((function(){ne.current.setAttribute("disabled",!0)}),[]),Object(n.useEffect)((function(){a<=0&&ae.current.focus()}),[a]),Object(n.useEffect)((function(){p&&re()}),[p]),r.a.createElement("div",{className:"App",onKeyDown:ee},r.a.createElement(c,{myText:S,setMyText:H,wikiTitle:I,setWikiTitle:L,newRandomArticle:B,setNewRandomArticle:F,disablingButton:x,loremText:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n  eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad\n  minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n  aliquip ex ea commodo consequat Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n  eiusmod tempor incididunt ut labore et dolore magna aliqua. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n  eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut ENIM ad\n  minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n  aliquip ex ea commodo consequat Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n  eiusmod tempor incididunt ut labore et dolore magna aliqua. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n  eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad\n  minim veniam, quis nostrud exercitation ullamco laboris nisi ut\n  aliquip ex ea commodo consequat Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do\n  eiusmod tempor incididunt ut labore et dolore magna ALIQua.",focusTextArea:ne}),r.a.createElement(T,{timerValue:a,setTimerValue:i,constantTimerValue:u,toggleTimer:X,setTimerOnSelect:function(e){i(e.target.value),m(e.target.value)},isActive:p,resetTimer:Y,toReset:E,displayToReset:O,setDisplayToReset:j,areHintsVisible:U,areResultsVisible:_,toggleHints:function(){p||G(!U)},toggleResults:z,isDisabled:te,focusTextArea:ne,putFocusOnTextArea:re,focusElement:ae,myText:S,wikiTitle:I,setNewRandomArticle:F,disablingButton:x,isCounterRunning:A}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(h,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[6,1,2]]]);
//# sourceMappingURL=main.4c375ee9.chunk.js.map